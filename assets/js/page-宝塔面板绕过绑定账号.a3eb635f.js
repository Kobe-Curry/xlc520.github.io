(window.webpackJsonp=window.webpackJsonp||[]).push([[74],{552:function(n,t,s){"use strict";s.r(t);var a=s(1),e=Object(a.a)({},(function(){var n=this,t=n.$createElement,s=n._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[s("h1",{attrs:{id:"宝塔面板v7-7-0-解锁nginx防火墙及网站监控报表-绕过绑定账号"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#宝塔面板v7-7-0-解锁nginx防火墙及网站监控报表-绕过绑定账号"}},[n._v("#")]),n._v(" 宝塔面板v7.7.0-解锁Nginx防火墙及网站监控报表-绕过绑定账号")]),n._v(" "),s("p",[n._v("测试环境：Ubuntu / Debian / CentOS\n测试时间：2021-12-20\n宝塔版本： 7.7.0\n仅测试了Nginx防火墙及网站监控报表两款插件，其它收费插件未测试\n其它系统及版本未进行测试，请自行验证，请勿在生产环境下进行测试！\n注意：修改代码后需要重启面板服务才能使其生效，如果面板出现乱码重启服务器即可；")]),n._v(" "),s("p",[n._v("解锁所有付费插件为永不过期")]),n._v(" "),s("p",[n._v('文件路径：www/server/panel/data/plugin.json\n搜索字符串："endtime": -1 全部替换为 "endtime": 999999999999\n显示永久专业版或企业版标识')]),n._v(" "),s("p",[n._v('文件路径：www/server/panel/data/plugin.json\n查找字符串：name": "coll_admin"，将panel_pro或panel_ltd后面的-1改为0\n禁止解锁插件后自动修复为免费版')]),n._v(" "),s("p",[n._v('文件路径：www/server/panel/data/repair.json\n查找字符串："id": 16，将这段修复权限的代码删除\n禁止宝塔面板检测升级，防止失效')]),n._v(" "),s("p",[n._v('文件路径：www/server/panel/data/plugin.json\n查找字符串：name": "coll_admin"，将这段里的update_mgs删除或者改为null\n下面是2021/08/24的方法，上面是最新的\n修改后不能使用问题：如果修改后出现软件中心页面空白，那是因为代码位置有问题，可以参考下面示例图代码位置 位置一定要一致\n开始\n打开目录/www/server/panel/class找到并编辑panelplugin.py文件\n使用Ctrl+F搜索并找到softList[\'list\'] = tmpList这段代码，在其下方添加如下代码：')]),n._v(" "),s("div",{staticClass:"language-python line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[n._v("                softList"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[n._v("'pro'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("]")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[n._v("=")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[n._v("1")]),n._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("for")]),n._v(" soft "),s("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("in")]),n._v(" softList"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[n._v("'list'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(":")]),n._v("\n            soft"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[n._v("'endtime'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("]")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[n._v("=")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[n._v("0")]),n._v("\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br")])]),s("p",[n._v("示例：\n"),s("img",{attrs:{src:"/linux/bt_files/2.png",alt:"",loading:"lazy"}})]),n._v(" "),s("p",[n._v("修改完成后重启面板，重启完成后就可以直接安装收费的插件了，Nginx防火墙也可以直接安装使用")]),n._v(" "),s("p",[n._v("网站监控报表\n如果需要使用网站监控报表还需另外修改一次代码：\n安装好网站监控报表插件后打开/www/server/panel/plugin/total目录并编辑total_main.py文件\n使用Ctrl+F搜索并找到if 'bt_total' in session: return public.returnMsg(True,'OK!');这段代码\n在这段代码前加上#将其注释掉，并在其下方加入以下代码：")]),n._v(" "),s("div",{staticClass:"language-python line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[n._v("        session"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[n._v("'bt_total'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("]")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[n._v("=")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[n._v("True")]),n._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("return")]),n._v(" public"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(".")]),n._v("returnMsg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("(")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[n._v("True")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(",")]),s("span",{pre:!0,attrs:{class:"token string"}},[n._v("'OK!'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br")])]),s("p",[n._v("示例：\n"),s("img",{attrs:{src:"/linux/bt_files/1.png",alt:"",loading:"lazy"}})]),n._v(" "),s("p",[n._v("然后再次重启面板，即可使用网站监控报表插件了；")]),n._v(" "),s("p",[n._v("一键消除宝塔的强制登录方法简单粗暴，但是非常有效~")]),n._v(" "),s("p",[n._v("复制该命令到终端运行即可："),s("code",[n._v("rm -f /www/server/panel/data/bind.pl")])])])}),[],!1,null,null,null);t.default=e.exports}}]);